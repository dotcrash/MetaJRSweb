{"remainingRequest":"F:\\HBuilderX软件\\Project\\brainHealth\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\thread-loader\\dist\\cjs.js!F:\\HBuilderX软件\\Project\\brainHealth\\node_modules\\babel-loader\\lib\\index.js!F:\\HBuilderX软件\\Project\\brainHealth\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\HBuilderX软件\\Project\\brainHealth\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\HBuilderX软件\\Project\\brainHealth\\src\\views\\user\\userCenter\\components\\uploadImg.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\HBuilderX软件\\Project\\brainHealth\\src\\views\\user\\userCenter\\components\\uploadImg.vue","mtime":1634182984000},{"path":"F:\\HBuilderX软件\\Project\\brainHealth\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652884357093},{"path":"F:\\HBuilderX软件\\Project\\brainHealth\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1652884357093},{"path":"F:\\HBuilderX软件\\Project\\brainHealth\\node_modules\\babel-loader\\lib\\index.js","mtime":1652881229298},{"path":"F:\\HBuilderX软件\\Project\\brainHealth\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652884357073},{"path":"F:\\HBuilderX软件\\Project\\brainHealth\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1652886624014}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L0hCdWlsZGVyWFx1OEY2Rlx1NEVGNi9Qcm9qZWN0L2JyYWluSGVhbHRoL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyB1cGxvYWRBdmF0YXJJbWdBcGkgfSBmcm9tICJAL2FwaS9hcGkiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInVwbG9hZEltZyIsCiAgcHJvcHM6IHsKICAgIGRpYWxvZ1RhYmxlVmlzaWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICAiZGVmYXVsdCI6IGZhbHNlCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW1nVXJsOiAiIiwKICAgICAgc2hvd0ltZzogdHJ1ZSwKICAgICAgZmlsZWRhdGE6ICIiCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgY2xvc2VDbGljazogZnVuY3Rpb24gY2xvc2VDbGljaygpIHsKICAgICAgdGhpcy4kZW1pdCgiY2xvc2VVcGxvYWRJbWciLCBmYWxzZSk7CiAgICB9LAogICAgZ2V0RmlsZTogZnVuY3Rpb24gZ2V0RmlsZShmaWxlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiR1dGlscy5nZXRCYXNlNjQoZmlsZSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgX3RoaXMuc2hvd0ltZyA9IGZhbHNlOwogICAgICAgICAgX3RoaXMuaW1nVXJsID0gcmVzOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g6KaG55uW6buY6K6k55qE5LiK5Lyg6KGM5Li677yM5Y+v5Lul6Ieq5a6a5LmJ5LiK5Lyg55qE5a6e546wCiAgICBoYW5kbGVVcGxvYWQ6IGZ1bmN0aW9uIGhhbmRsZVVwbG9hZChyZXMpIHsKICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgiYXZhdGFyIiwgcmVzLmZpbGUpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImlkIiwgdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRVc2VyLl9pZCk7CiAgICAgIHRoaXMuZmlsZWRhdGEgPSBmb3JtRGF0YTsKICAgICAgdGhpcy5nZXRGaWxlKHJlcy5maWxlKTsKICAgIH0sCiAgICAvL+WPlua2iOS4iuS8oAogICAgY2FuY2VsVXBsb2FkOiBmdW5jdGlvbiBjYW5jZWxVcGxvYWQoKSB7CiAgICAgIHRoaXMuc2hvd0ltZyA9IHRydWU7CiAgICAgIHRoaXMuaW1nVXJsID0gIiI7CiAgICB9LAogICAgLy/noa7orqTkuIrkvKAKICAgIGNvbmZpcm1VcGxvYWQ6IGZ1bmN0aW9uIGNvbmZpcm1VcGxvYWQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHVwbG9hZEF2YXRhckltZ0FwaShfdGhpczIuZmlsZWRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBfdGhpczIuJHV0aWxzLmVsTWVzc2FnZUJveCgi5pu05o2i5aS05YOP5oiQ5YqfIiwgInN1Y2Nlc3MiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczIuY2xvc2VDbGljaygpOwoKICAgICAgICAgICAgICAgIF90aGlzMi4kZW1pdCgidXBkYXRlSW1nIik7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["uploadImg.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAoBA,SAAA,kBAAA,QAAA,WAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,kBAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,iBAAA;AAFA;AADA,GAFA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,IAFA;AAGA,MAAA,QAAA,EAAA;AAHA,KAAA;AAKA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,WAAA,KAAA,CAAA,gBAAA,EAAA,KAAA;AACA,KAHA;AAIA,IAAA,OAJA,mBAIA,IAJA,EAIA;AAAA;;AACA,WAAA,MAAA,CAAA,SAAA,CAAA,IAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,UAAA,KAAA,CAAA,MAAA,GAAA,GAAA;AACA;AACA,OALA;AAMA,KAXA;AAYA;AACA,IAAA,YAbA,wBAaA,GAbA,EAaA;AACA,UAAA,QAAA,GAAA,IAAA,QAAA,EAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,QAAA,EAAA,GAAA,CAAA,IAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,IAAA,EAAA,KAAA,MAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA;AACA,WAAA,QAAA,GAAA,QAAA;AACA,WAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,KAnBA;AAoBA;AACA,IAAA,YArBA,0BAqBA;AACA,WAAA,OAAA,GAAA,IAAA;AACA,WAAA,MAAA,GAAA,EAAA;AACA,KAxBA;AAyBA;AACA,IAAA,aA1BA,2BA0BA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,kBAAA,CAAA,MAAA,CAAA,QAAA,CADA;;AAAA;AACA,gBAAA,GADA;AAEA,gBAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,oBAAA,GAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,kBAAA,MAAA,CAAA,MAAA,CAAA,YAAA,CAAA,QAAA,EAAA,SAAA;AACA;;AACA,gBAAA,MAAA,CAAA,UAAA;;AACA,gBAAA,MAAA,CAAA,KAAA,CAAA,WAAA;;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAlCA;AAfA,CAAA","sourcesContent":["<template>\n  <div class=\"upload-box\">\n    <el-dialog title=\"更换头像\" @close=\"closeClick\" :visible=\"true\" :close-on-click-modal=\"false\" align=\"center\" width=\"800px\">\n      <el-upload class=\"upload-demo\" :http-request=\"handleUpload\" action :limit=\"1\" :show-file-list=\"false\" drag v-if=\"showImg\">\n        <i class=\"el-icon-upload\"></i>\n        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n        <div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过1M</div>\n      </el-upload>\n      <div v-else class=\"img-box\">\n        <img :src=\"imgUrl\" alt=\"\" />\n        <div class=\"btn-box\">\n          <el-button type=\"info\" plain @click=\"cancelUpload\">取消</el-button>\n          <el-button type=\"danger\" plain @click=\"confirmUpload\">上传并保存</el-button>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { uploadAvatarImgApi } from \"@/api/api\";\nexport default {\n  name: \"uploadImg\",\n  props: {\n    dialogTableVisible: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      imgUrl: \"\",\n      showImg: true,\n      filedata: \"\",\n    };\n  },\n  methods: {\n    closeClick() {\n      this.$emit(\"closeUploadImg\", false);\n    },\n    getFile(file) {\n      this.$utils.getBase64(file).then((res) => {\n        if (res) {\n          this.showImg = false;\n          this.imgUrl = res;\n        }\n      });\n    },\n    // 覆盖默认的上传行为，可以自定义上传的实现\n    handleUpload(res) {\n      let formData = new FormData();\n      formData.append(\"avatar\", res.file);\n      formData.append(\"id\", this.$store.getters.getUser._id);\n      this.filedata = formData;\n      this.getFile(res.file);\n    },\n    //取消上传\n    cancelUpload() {\n      this.showImg = true;\n      this.imgUrl = \"\";\n    },\n    //确认上传\n    async confirmUpload() {\n      let res = await uploadAvatarImgApi(this.filedata);\n      console.log(res);\n      if (res.code === 200) {\n        this.$utils.elMessageBox(\"更换头像成功\", \"success\");\n      }\n      this.closeClick();\n      this.$emit(\"updateImg\");\n    },\n  },\n};\n</script>\n\n<style scoped>\n.img-box {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n.img-box > img {\n  width: 240px;\n  height: 240px;\n  border-radius: 50%;\n}\n.btn-box {\n  margin-top: 30px;\n  width: 200px;\n  display: flex;\n  justify-content: space-between;\n}\n.el-upload__tip {\n  font-size: 16px;\n}\n.el-upload__text {\n  font-size: 16px;\n}\n</style>"],"sourceRoot":"src/views/user/userCenter/components"}]}