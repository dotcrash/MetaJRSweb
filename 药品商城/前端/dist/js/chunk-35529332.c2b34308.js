(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35529332"],{"7ffa":function(t,e,n){},8853:function(t,e,n){},ad2a:function(t,e,n){"use strict";n("7ffa")},d5ff:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-details"},[n("div",{staticClass:"article-left"},[n("div",{staticClass:"article-box"},[n("div",{staticClass:"title"},[n("p",[t._v(t._s(t.articleData.title))])]),n("div",{staticClass:"avatar"},[n("span",[n("i",{staticClass:"el-icon-edit-outline"},[t._v(t._s(t.timeToDate(t.articleData.createdTime))+" ")])]),n("span",[n("i",{staticClass:"el-icon-view"},[t._v(t._s(t.articleData.readNum)+" ")])]),n("span",{class:{like_color:t.likeForm.status},on:{click:t.goLike}},[n("i",{staticClass:"el-icon-thumb"},[t._v(t._s(t.articleData.likeNum))])]),n("span",[n("a",{attrs:{href:"#comment"}},[n("i",{staticClass:"el-icon-chat-dot-round"},[t._v(t._s(t.commentNum))])])])]),t.articleData.articleImg?n("div",{staticClass:"articleimg"},[n("img",{attrs:{src:t.articleData.articleImg,alt:""}})]):t._e(),n("div",{staticClass:"content"},[n("p",{domProps:{innerHTML:t._s(t.articleData.contentHtml)}})])]),n("div",{staticClass:"comment-main",attrs:{id:"comment"}},[n("getComment",{on:{commentNumAdd:t.commentNumAdd}})],1)]),n("div",{staticClass:"article-right"},[n("div",{staticClass:"user-box"},[n("img",{attrs:{src:t.userInfo.avatar,alt:""}}),n("p",[t._v(t._s(t.userInfo.nickname))]),n("p",{staticStyle:{"font-size":"14px",color:"#999999","line-height":"24px"}},[t._v(" "+t._s(t.userInfo.experience?t.userInfo.experience:"此人很懒，连自己的简介都不写!!!")+" ")]),n("div",{staticClass:"box-bottom"},t._l(t.totalRaticleReadLike,(function(e,a){return n("div",{key:a},[n("p",[t._v(t._s(e.name))]),n("p",[t._v(t._s(e.value))])])})),0),n("div",{staticClass:"user-btn"},[n("el-button",{attrs:{type:"danger"},on:{click:t.goUserDetailsInfo}},[t._v("查 看 其 它 文 章 信 息")])],1)])])])},r=[],o=n("1da1"),s=(n("4795"),n("96cf"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-box"},[n("div",{staticClass:"my-box"},[n("div",{staticClass:"avatar-input"},[t.getToken?n("img",{attrs:{src:t.avatarUrl,alt:""}}):t._e(),n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:2},placeholder:"请输入评论内容",maxlength:"200"},on:{focus:t.commentInputFocus},model:{value:t.commentArticle,callback:function(e){t.commentArticle=e},expression:"commentArticle"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showBtn,expression:"showBtn"}],staticClass:"btn-box"},[n("el-button",{attrs:{type:"primary",round:""},on:{click:t.cancelComment}},[t._v("取 消 评 论")]),n("el-button",{attrs:{type:"primary",round:""},on:{click:t.sendComment}},[t._v("发 表 评 论")])],1)]),t.allCommentData.length?n("div",{staticClass:"sort-box"},[n("h3",[t._v("排序")]),n("h6",{on:{click:t.sortCheck}},[t._v(" 按时间 "),n("li",{staticClass:"el-icon-sort"})])]):t._e(),t._l(t.allCommentData,(function(e,a){return n("div",{key:a,staticClass:"user-comment"},[n("img",{attrs:{src:e.fromUserId.avatar},on:{click:function(n){return t.goUserDetail(e.fromUserId._id)}}}),n("div",{staticClass:"box-right"},[n("div",{staticStyle:{"font-weight":"550"}},[t._v(t._s(e.fromUserId.nickname))]),n("p",[t._v(t._s(e.content))]),n("div",{staticClass:"options"},[t.isMe==e.fromUserId._id?n("span",{staticClass:"delete-comment",on:{click:function(n){return t.deleteComment(e)}}},[t._v("删除")]):t._e(),n("span",{staticClass:"reply",on:{click:function(n){return t.goReplyOneComment(a,e.fromUserId)}}},[t._v("回复")]),n("span",[t._v(t._s(t.getTime(e.createdTime)))])]),t.showOneComment===a?n("div",{staticClass:"my-box"},[n("div",{staticClass:"avatar-input"},[n("img",{attrs:{src:t.avatarUrl}}),n("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2},placeholder:"回复: "+e.fromUserId.nickname,maxlength:"200"},model:{value:t.commentForm.content,callback:function(e){t.$set(t.commentForm,"content",e)},expression:"commentForm.content"}})],1),n("div",{staticClass:"btn-box"},[n("el-button",{attrs:{type:"primary",round:""},on:{click:t.cancelReplyOneComment}},[t._v("取 消 回 复")]),n("el-button",{attrs:{type:"primary",round:""},on:{click:t.sendReply}},[t._v("发 表 评 论")])],1)]):t._e(),t._l(e.secondComment,(function(e,a){return n("div",{key:a,staticClass:"user-comment child-comment"},[n("img",{attrs:{src:e.fromUserInfo.avatar},on:{click:function(n){return t.goUserDetail(e.fromUserInfo._id)}}}),n("div",{staticClass:"box-right reply-right"},[n("div",{staticStyle:{"font-weight":"550"}},[t._v(t._s(e.fromUserInfo.nickname))]),n("p",[t._v(t._s(e.content))]),n("div",{staticClass:"options"},[t.isMe==e.fromUserInfo._id?n("span",{staticClass:"delete-comment",on:{click:function(n){return t.deleteComment(e)}}},[t._v("删除 ")]):t._e(),n("span",{staticClass:"reply",on:{click:function(n){return t.goSecondReply(e._id,"",e.fromUserInfo)}}},[t._v("回复")]),n("span",[t._v(t._s(t.getTime(e.createdTime)))])]),t.showChildComment==e._id?n("div",{staticClass:"my-box reply-box"},[n("div",{staticClass:"avatar-input"},[n("img",{attrs:{src:t.avatarUrl,alt:""}}),n("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2},placeholder:"回复: "+e.fromUserInfo.nickname,maxlength:"200"},model:{value:t.commentForm.content,callback:function(e){t.$set(t.commentForm,"content",e)},expression:"commentForm.content"}})],1),n("div",{staticClass:"btn-box"},[n("el-button",{attrs:{type:"primary",round:""},on:{click:t.cancelReplyOneComment}},[t._v("取 消 回 复")]),n("el-button",{attrs:{type:"primary",round:""},on:{click:t.sendReply}},[t._v("发 表 评 论")])],1)]):t._e(),t._l(e.secondComment,(function(a,r){return n("div",{key:r,staticClass:"three_comment_box"},[n("img",{attrs:{src:a.fromUserInfo.avatar},on:{click:function(e){return t.goUserDetail(a.fromUserInfo._id)}}}),n("div",{staticClass:"box-right reply-right three_box-right"},[n("div",{staticStyle:{"font-weight":"550"}},[t._v(t._s(a.fromUserInfo.nickname))]),n("p",[t._v(" 回复 "),n("span",{staticClass:"get-user",staticStyle:{color:"#0099ff"},on:{click:function(e){return t.goUserDetail(a.toUserInfo._id)}}},[t._v(" @"+t._s(a.toUserInfo.nickname)+" ")]),t._v(" : "+t._s(a.content)+" ")]),n("div",{staticClass:"options"},[t.isMe==a.fromUserInfo._id?n("span",{staticClass:"delete-comment",on:{click:function(e){return t.deleteComment(a)}}},[t._v("删除 ")]):t._e(),n("span",{staticClass:"reply",on:{click:function(n){return t.goSecondReply(e._id,a._id,a.fromUserInfo)}}},[t._v("回复")]),n("span",[t._v(t._s(t.getTime(a.createdTime)))])]),t.showChildComment==a._id?n("div",{staticClass:"my-box reply-box three_left_margin"},[n("div",{staticClass:"avatar-input"},[n("img",{attrs:{src:t.avatarUrl,alt:""}}),n("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2},placeholder:"回复: "+a.fromUserInfo.nickname,maxlength:"200"},model:{value:t.commentForm.content,callback:function(e){t.$set(t.commentForm,"content",e)},expression:"commentForm.content"}})],1),n("div",{staticClass:"btn-box"},[n("el-button",{attrs:{type:"primary",round:""},on:{click:t.cancelReplyOneComment}},[t._v("取 消 回 复")]),n("el-button",{attrs:{type:"primary",round:""},on:{click:t.sendReply}},[t._v("发 表 评 论")])],1)]):t._e()])])}))],2)])}))],2)])})),t.allCommentData.length?t._e():n("div",{staticStyle:{color:"#999aaa","margin-bottom":"10px","font-size":"16px","text-align":"center"}},[t._v("此文章还未被吐槽，快来吐槽一下吧")]),n("div",{staticClass:"page-box"},[n("el-pagination",{attrs:{"current-page":t.nowPage,background:"",layout:"prev, pager, next",total:t.total},on:{"update:currentPage":function(e){t.nowPage=e},"update:current-page":function(e){t.nowPage=e},"current-change":t.currentChange}})],1)],2)}),i=[],c=(n("4160"),n("159b"),n("4ec3")),m={name:"getComment",data:function(){return{showOneComment:-1,showBtn:!1,showChildComment:"",commentArticle:"",total:10,nowPage:1,isMe:this.$utils.getUserId(),allCommentData:[{fromUserId:{_id:1,nickname:"爱开发的小罗",avatar:"./static/img/avatar/1.jpg"},content:"祝他早日康复！"},{fromUserId:{_id:2,nickname:"爱开发的小罗",avatar:"./static/img/avatar/2.jpg"},content:"我爷爷也是这病，现在还处于治疗中，真让我担心。"}],commentForm:{articleId:this.$route.params.id,content:"",parentId:"",commentGrade:"",fromUserId:this.$utils.getUserId(),toUserId:""},form:{articleId:this.$route.params.id,sortStatus:-1,pageNum:1},ifLogin:!0}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getData();case 2:case"end":return e.stop()}}),e)})))()},mounted:function(){},methods:{getData:function(){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},currentChange:function(t){this.form.pageNum=t,this.getData()},goReplyOneComment:function(t,e){this.getToken?(this.commentArticle="",this.commentForm.content="",this.commentForm.parentId=this.allCommentData[t]._id,this.commentForm.toUserId=e._id,this.commentForm.commentGrade="2",this.showBtn=!1,this.showOneComment=t,this.showChildComment=""):this.$utils.elMessageBox("您还未登录，请登录后再试！！！","error")},commentInputFocus:function(){this.getToken?(this.commentForm.content="",this.showOneComment=-1,this.showBtn=!0,this.showChildComment=""):this.$utils.elMessageBox("您还未登录，请登录后再试！！！","error")},cancelComment:function(){this.showBtn=!1,this.commentArticle=""},cancelReplyOneComment:function(){this.commentForm.content="",this.showOneComment=-1,this.showChildComment=""},sendComment:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.getToken){e.next=10;break}return t.commentForm.content=t.commentArticle,t.commentForm.toUserId=t.$utils.getUserId(),t.commentForm.commentGrade="1",e.next=6,Object(c["f"])(t.commentForm);case 6:n=e.sent,200===n.code&&(t.getData(),t.commentForm.content="",t.commentArticle="",t.showBtn=!1,t.$utils.elMessageBox("评论成功","success"),t.$emit("commentNumAdd")),e.next=11;break;case 10:t.$utils.elMessageBox("请登录后再发表评论","error");case 11:case"end":return e.stop()}}),e)})))()},sendReply:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.getToken){e.next=7;break}return e.next=3,Object(c["f"])(t.commentForm);case 3:n=e.sent,200==n.code&&(t.$utils.elMessageBox("回复成功","success"),t.$emit("commentNumAdd"),t.showChildComment="",t.showOneComment=-1,t.commentForm.content="",t.getData()),e.next=8;break;case 7:t.$utils.elMessageBox("请登录后再进行回复操作","error");case 8:case"end":return e.stop()}}),e)})))()},deleteFormId:function(t){var e=[];return e.push({_id:t._id}),t.secondComment.length&&t.secondComment.forEach((function(t){e.push({_id:t._id}),t.secondComment&&t.secondComment.length&&t.secondComment.forEach((function(t){e.push({_id:t._id})}))})),e},deleteComment:function(t){var e=this;this.$confirm("将永久删除该评论，并且删除所有子评论, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=[],t.secondComment&&t.secondComment.length?a=e.deleteFormId(t):a.push({_id:t._id}),a=JSON.stringify(a),n.next=5,Object(c["g"])({deleteForm:a,articleId:e.$route.params.id});case 5:e.$utils.elMessageBox("删除成功","success"),e.$emit("commentNumAdd"),e.getData();case 8:case"end":return n.stop()}}),n)}))))["catch"]((function(t){console.error(t)}))},goSecondReply:function(t,e,n){this.getToken?(this.showChildComment=e||t,this.commentForm.parentId=t,this.commentForm.toUserId=n._id,this.commentForm.commentGrade="3",this.showBtn=!1,this.commentForm.content="",this.showOneComment=-1):this.$utils.elMessageBox("您还未登录，请登录后再试！！！","error")},goUserDetail:function(t){this.$router.push({path:"/article/release_manage/".concat(t)})},sortCheck:function(){this.form.sortStatus=0==~this.form.sortStatus?1:-1,this.getData()}},computed:{getToken:function(){return!!this.$store.getters.getToken},avatarUrl:function(){return this.$store.getters.getUser.avatar},getTime:function(){return function(t){return this.$utils.timeToDate(t)}}}},l=m,u=(n("fed4"),n("0c7c")),d=Object(u["a"])(l,s,i,!1,null,"0a83daec",null),h=d.exports,p={name:"articleDetails",components:{getComment:h},data:function(){return{articleData:{title:"脑系疾病的自述",readNum:20,commentNum:20,likeNum:20,createdTime:"2022-05-06",contentHtml:"       我父亲去年突发脑中风，到时情况非常的严重。幸亏我母亲发现及时，送去医院经过大夫8个小时的手术抢救才没有生命危险。可是2天后，父亲醒来的时候发现发起到不能说话、右手臂没有知觉。当时赶紧找来了大夫，大夫检查之后诊断为是中风偏瘫。\r\n       大夫告诉我说偏瘫是由于控制肢体协调一致的运动程序紊乱引起的，因此关键是恢复高位中枢重新支配肢体的功能。当时大夫建议在他医院接受神经训导康复。当时我们也同意，之后的治疗全面都是大夫负责进行的。效果还真的不错，在康复半年后，我们能明显感觉到父亲的状况好多了。接下来我们还是在继续治疗下去，相信有一天一定能好起来的，我相信大夫的能力。",articleImg:"./static/img/content/1.jpg"},timer:null,commentNum:3,userInfo:{_id:1,nickname:"爱开发的小罗",avatar:"./static/img/avatar/1.jpg",experience:""},totalRaticleReadLike:[{name:"总浏览量",value:"20"},{name:"点赞总数",value:"20"},{name:"文章总数",value:"20"}],likeForm:{status:!1,form:{articleId:this.$route.params.id,userId:this.$utils.getUserId()}}}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$store.getters.getToken){e.next=7;break}return e.next=3,Object(c["k"])(t.likeForm);case 3:n=e.sent,t.likeForm.status=n.data,e.next=8;break;case 7:t.likeForm.status=!1;case 8:return e.next=10,t.getData();case 10:return e.next=12,t.totalRaticleReadLikeApi();case 12:case"end":return e.stop()}}),e)})))()},mounted:function(){document.documentElement.scrollTop=0},methods:{getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["i"])({id:t.$route.params.id});case 2:n=e.sent,n&&(t.articleData=n.data,t.commentNum=n.data.commentNum,t.userInfo=n.data.userId);case 4:case"end":return e.stop()}}),e)})))()},totalRaticleReadLikeApi:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["m"])({userId:t.userInfo._id});case 2:n=e.sent,n&&(t.totalRaticleReadLike=n.data);case 4:case"end":return e.stop()}}),e)})))()},goLike:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$store.getters.getToken){e.next=10;break}if(t.timer&&clearTimeout(t.timer),t.timer){e.next=7;break}return e.next=5,Object(c["a"])(t.likeForm);case 5:n=e.sent,200===n.code&&(t.likeForm.status=!t.likeForm.status,"点赞成功"==n.msg?(t.articleData.likeNum=t.articleData.likeNum+1,t.totalRaticleReadLikeApi()):(t.articleData.likeNum=t.articleData.likeNum-1,t.totalRaticleReadLikeApi()));case 7:t.timer=setTimeout((function(){t.timer=null}),300),e.next=11;break;case 10:t.$utils.elMessageBox("您还未登录，请登录后操作","error",3e3);case 11:case"end":return e.stop()}}),e)})))()},commentNumAdd:function(){this.getData(),this.totalRaticleReadLikeApi()},goUserDetailsInfo:function(){this.$router.push({path:"/article/release_manage/".concat(this.userInfo._id)})}},computed:{timeToDate:function(){return function(t){return this.$utils.timeToDate(t)}}}},f=p,g=(n("ad2a"),Object(u["a"])(f,a,r,!1,null,"097f5568",null));e["default"]=g.exports},fed4:function(t,e,n){"use strict";n("8853")}}]);
//# sourceMappingURL=chunk-35529332.c2b34308.js.map