{"remainingRequest":"F:\\HBuilderX软件\\Project\\brainHealth\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\thread-loader\\dist\\cjs.js!F:\\HBuilderX软件\\Project\\brainHealth\\node_modules\\babel-loader\\lib\\index.js!F:\\HBuilderX软件\\Project\\brainHealth\\src\\api\\index.js","dependencies":[{"path":"F:\\HBuilderX软件\\Project\\brainHealth\\src\\api\\index.js","mtime":1634182984000},{"path":"F:\\HBuilderX软件\\Project\\brainHealth\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652884357093},{"path":"F:\\HBuilderX软件\\Project\\brainHealth\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1652884357093},{"path":"F:\\HBuilderX软件\\Project\\brainHealth\\node_modules\\babel-loader\\lib\\index.js","mtime":1652881229298}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0ICR1dGlscyBmcm9tICdAL3V0aWxzL2luZGV4JzsKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlciI7CmltcG9ydCBzdG9yZSBmcm9tICJAL3N0b3JlIjsKCmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gInByb2R1Y3Rpb24iKSB7CiAgYXhpb3MuZGVmYXVsdHMuYmFzZVVSTCA9ICdodHRwOi8vOC4xMjkuMjA4LjQ4OjMwMDAnOwp9IGVsc2UgewogIGF4aW9zLmRlZmF1bHRzLmJhc2VVUkwgPSAnaHR0cDovLzEyNy4wLjAuMTozMDAwJzsKfSAvL+i2heaXtuaXtumXtAoKCmF4aW9zLmRlZmF1bHRzLnRpbWVvdXQgPSAxNSAqIDEwMDA7IC8v5YWo5bGA6K+35rGC5oum5oiq5aSE55CGCgpheGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKHJlcXVlc3QpIHsKICByZXF1ZXN0LmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICJCZWFyZXIgIiArIHN0b3JlLmdldHRlcnMuZ2V0VG9rZW47CiAgcmVxdWVzdC5oZWFkZXJzLnBvc3RbIkNvbnRlbnQtVHlwZSJdID0gIm11bHRpcGFydC9mb3JtLWRhdGEiOwogIHJldHVybiByZXF1ZXN0Owp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsgLy/lhajlsYDlk43lupTmi6bmiKrlpITnkIYKCmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgaWYgKHN0b3JlLmdldHRlcnMuZ2V0VG9rZW4gJiYgcmVzcG9uc2UuZGF0YS5jb2RlID09PSA5NjI0NjQpIHsKICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpOwoKICAgIGlmIChyb3V0ZXIuY3VycmVudFJvdXRlLnBhdGggIT09ICIvIiAmJiByb3V0ZXIuY3VycmVudFJvdXRlLnBhdGggIT09ICIvbG9naW4iKSB7CiAgICAgIHJvdXRlci5wdXNoKCIvIik7CiAgICB9CgogICAgcmV0dXJuICR1dGlscy5lbE1lc3NhZ2VCb3goIueZu+W9leWkseaViO+8jOivt+mHjeaWsOeZu+W9lS3lhajlsYAiLCAid2FybmluZyIsIDMwMDAsIHRydWUpOwogIH0KCiAgaWYgKFstMSwgNDAwLCA0MDFdLmluY2x1ZGVzKHJlc3BvbnNlLmRhdGEuY29kZSkpIHsKICAgIHJldHVybiAkdXRpbHMuZWxNZXNzYWdlQm94KHJlc3BvbnNlLmRhdGEubXNnLCAid2FybmluZyIpOwogIH0KCiAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGlmIChKU09OLnN0cmluZ2lmeShlcnJvcikuaW5jbHVkZXMoIiBSZXF1ZXN0IGZhaWxlZCIpKSB7CiAgICAkdXRpbHMuZWxNZXNzYWdlQm94KCLor7fmsYLplJnor6/vvIzor7fnqI3lkI7lho3or5Ut5YWo5bGAIiwgImVycm9yIiwgMzAwMCwgdHJ1ZSk7CiAgfSBlbHNlIGlmIChKU09OLnN0cmluZ2lmeShlcnJvcikuaW5jbHVkZXMoIk5ldHdvcmsgRXJyb3IiKSkgewogICAgJHV0aWxzLmVsTWVzc2FnZUJveCgi572R57uc5byC5bi477yM6K+356iN5ZCO5YaN6K+VLeWFqOWxgCIsICJlcnJvciIsIDMwMDAsIHRydWUpOwogIH0gZWxzZSBpZiAoSlNPTi5zdHJpbmdpZnkoZXJyb3IpLmluY2x1ZGVzKCJFcnJvcjogdGltZW91dCIpKSB7CiAgICAkdXRpbHMuZWxNZXNzYWdlQm94KCLor7fmsYLotoXml7bvvIzor7fnqI3lkI7lho3or5Ut5YWo5bGAIiwgImVycm9yIiwgMzAwMCwgdHJ1ZSk7CiAgfQoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgYXhpb3M7"},{"version":3,"sources":["F:/HBuilderX软件/Project/brainHealth/src/api/index.js"],"names":["axios","$utils","router","store","process","env","NODE_ENV","defaults","baseURL","timeout","interceptors","request","use","headers","Authorization","getters","getToken","post","error","Promise","reject","response","data","code","localStorage","clear","currentRoute","path","push","elMessageBox","includes","msg","JSON","stringify"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;;AAEA,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzCN,EAAAA,KAAK,CAACO,QAAN,CAAeC,OAAf,GAAyB,0BAAzB;AACD,CAFD,MAEO;AACLR,EAAAA,KAAK,CAACO,QAAN,CAAeC,OAAf,GAAyB,uBAAzB;AACD,C,CAED;;;AACAR,KAAK,CAACO,QAAN,CAAeE,OAAf,GAAyB,KAAK,IAA9B,C,CAEA;;AACAT,KAAK,CAACU,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACE,UAAAD,OAAO,EAAI;AACTA,EAAAA,OAAO,CAACE,OAAR,CAAgBC,aAAhB,GAAgC,YAAYX,KAAK,CAACY,OAAN,CAAcC,QAA1D;AACAL,EAAAA,OAAO,CAACE,OAAR,CAAgBI,IAAhB,CAAqB,cAArB,IAAuC,qBAAvC;AACA,SAAON,OAAP;AACD,CALH,EAME,UAAAO,KAAK,EAAI;AACP,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CARH,E,CAWA;;AACAlB,KAAK,CAACU,YAAN,CAAmBW,QAAnB,CAA4BT,GAA5B,CACE,UAAAS,QAAQ,EAAI;AACV,MAAIlB,KAAK,CAACY,OAAN,CAAcC,QAAd,IAA0BK,QAAQ,CAACC,IAAT,CAAcC,IAAd,KAAuB,MAArD,EAA6D;AAC3DC,IAAAA,YAAY,CAACC,KAAb;;AACA,QAAIvB,MAAM,CAACwB,YAAP,CAAoBC,IAApB,KAA6B,GAA7B,IAAoCzB,MAAM,CAACwB,YAAP,CAAoBC,IAApB,KAA6B,QAArE,EAA+E;AAC7EzB,MAAAA,MAAM,CAAC0B,IAAP,CAAY,GAAZ;AACD;;AACD,WAAO3B,MAAM,CAAC4B,YAAP,CAAoB,eAApB,EAAqC,SAArC,EAAgD,IAAhD,EAAsD,IAAtD,CAAP;AACD;;AACD,MAAI,CAAC,CAAC,CAAF,EAAK,GAAL,EAAU,GAAV,EAAeC,QAAf,CAAwBT,QAAQ,CAACC,IAAT,CAAcC,IAAtC,CAAJ,EAAiD;AAC/C,WAAOtB,MAAM,CAAC4B,YAAP,CAAoBR,QAAQ,CAACC,IAAT,CAAcS,GAAlC,EAAuC,SAAvC,CAAP;AACD;;AACD,SAAOV,QAAQ,CAACC,IAAhB;AACD,CAbH,EAcE,UAAAJ,KAAK,EAAI;AACP,MAAIc,IAAI,CAACC,SAAL,CAAef,KAAf,EAAsBY,QAAtB,CAA+B,iBAA/B,CAAJ,EAAuD;AACrD7B,IAAAA,MAAM,CAAC4B,YAAP,CAAoB,eAApB,EAAqC,OAArC,EAA8C,IAA9C,EAAoD,IAApD;AACD,GAFD,MAEO,IAAIG,IAAI,CAACC,SAAL,CAAef,KAAf,EAAsBY,QAAtB,CAA+B,eAA/B,CAAJ,EAAqD;AAC1D7B,IAAAA,MAAM,CAAC4B,YAAP,CAAoB,eAApB,EAAqC,OAArC,EAA8C,IAA9C,EAAoD,IAApD;AACD,GAFM,MAEA,IAAIG,IAAI,CAACC,SAAL,CAAef,KAAf,EAAsBY,QAAtB,CAA+B,gBAA/B,CAAJ,EAAsD;AAC3D7B,IAAAA,MAAM,CAAC4B,YAAP,CAAoB,eAApB,EAAqC,OAArC,EAA8C,IAA9C,EAAoD,IAApD;AACD;;AACD,SAAOV,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAvBH;AA0BA,eAAelB,KAAf","sourcesContent":["import axios from 'axios'\r\nimport $utils from '@/utils/index'\r\nimport router from \"@/router\"\r\nimport store from \"@/store\"\r\n\r\nif (process.env.NODE_ENV === \"production\") {\r\n  axios.defaults.baseURL = 'http://8.129.208.48:3000'\r\n} else {\r\n  axios.defaults.baseURL = 'http://127.0.0.1:3000'\r\n}\r\n\r\n//超时时间\r\naxios.defaults.timeout = 15 * 1000;\r\n\r\n//全局请求拦截处理\r\naxios.interceptors.request.use(\r\n  request => {\r\n    request.headers.Authorization = \"Bearer \" + store.getters.getToken;\r\n    request.headers.post[\"Content-Type\"] = \"multipart/form-data\";\r\n    return request\r\n  },\r\n  error => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n//全局响应拦截处理\r\naxios.interceptors.response.use(\r\n  response => {\r\n    if (store.getters.getToken && response.data.code === 962464) {\r\n      localStorage.clear()\r\n      if (router.currentRoute.path !== \"/\" && router.currentRoute.path !== \"/login\") {\r\n        router.push(\"/\")\r\n      }\r\n      return $utils.elMessageBox(\"登录失效，请重新登录-全局\", \"warning\", 3000, true)\r\n    }\r\n    if ([-1, 400, 401].includes(response.data.code)) {\r\n      return $utils.elMessageBox(response.data.msg, \"warning\")\r\n    }\r\n    return response.data;\r\n  },\r\n  error => {\r\n    if (JSON.stringify(error).includes(\" Request failed\")) {\r\n      $utils.elMessageBox(\"请求错误，请稍后再试-全局\", \"error\", 3000, true)\r\n    } else if (JSON.stringify(error).includes(\"Network Error\")) {\r\n      $utils.elMessageBox(\"网络异常，请稍后再试-全局\", \"error\", 3000, true)\r\n    } else if (JSON.stringify(error).includes(\"Error: timeout\")) {\r\n      $utils.elMessageBox(\"请求超时，请稍后再试-全局\", \"error\", 3000, true)\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default axios"]}]}